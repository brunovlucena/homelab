---
# K6 K6 Restaurant Test Dashboard
# This dashboard is automatically discovered by Grafana via the sidecar
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-k6-restaurant-test
  namespace: prometheus
  labels:
    grafana_dashboard: '1'
data:
  k6-restaurant-test-dashboard.json: "{\"title\":\"K6 Agent Restaurant Test Dashboard\",\"tags\":[\"k6\",\"agent-restaurant\",\"restaurant\",\"test\",\"dining\",\"hospitality\"],\"timezone\":\"browser\",\"schemaVersion\":39,\"version\":1,\"refresh\":\"30s\",\"uid\":\"k6-restaurant-test\",\"editable\":true,\"graphTooltip\":1,\"links\":[{\"asDropdown\":false,\"icon\":\"external link\",\"includeVars\":false,\"keepTime\":true,\"tags\":[],\"targetBlank\":true,\"title\":\"Agent Restaurant Dashboard\",\"type\":\"link\",\"url\":\"/d/agent-restaurant\"}],\"liveNow\":false,\"templating\":{\"list\":[{\"name\":\"testid\",\"type\":\"query\",\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"query\":{\"query\":\"label_values(k6_demo_restaurant_agent_messages_sent_total_total, job_name)\",\"refId\":\"StandardVariableQuery\"},\"current\":{\"selected\":true,\"text\":\"All\",\"value\":\"$__all\"},\"includeAll\":true,\"multi\":true,\"allValue\":\".*\",\"label\":\"Test ID\"}]},\"panels\":[{\"type\":\"row\",\"title\":\"\\ud83c\\udf7d\\ufe0f Restaurant Test Overview\",\"gridPos\":{\"h\":1,\"w\":24,\"x\":0,\"y\":0},\"id\":1,\"collapsed\":false},{\"type\":\"stat\",\"title\":\"Agent Messages Sent\",\"gridPos\":{\"h\":4,\"w\":6,\"x\":0,\"y\":1},\"id\":2,\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"fieldConfig\":{\"defaults\":{\"color\":{\"mode\":\"thresholds\"},\"thresholds\":{\"mode\":\"absolute\",\"steps\":[{\"color\":\"blue\",\"value\":null}]},\"unit\":\"short\"}},\"options\":{\"colorMode\":\"value\",\"graphMode\":\"area\",\"justifyMode\":\"auto\",\"orientation\":\"auto\",\"reduceOptions\":{\"calcs\":[\"lastNotNull\"],\"fields\":\"\",\"values\":false},\"textMode\":\"auto\"},\"targets\":[{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"sum(k6_demo_restaurant_agent_messages_sent_total_total{job_name=~\\\".*\\\"})\",\"legendFormat\":\"Messages\",\"refId\":\"A\"}]},{\"type\":\"stat\",\"title\":\"Conversation Flows\",\"gridPos\":{\"h\":4,\"w\":6,\"x\":6,\"y\":1},\"id\":3,\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"fieldConfig\":{\"defaults\":{\"color\":{\"mode\":\"thresholds\"},\"thresholds\":{\"mode\":\"absolute\",\"steps\":[{\"color\":\"green\",\"value\":null}]},\"unit\":\"short\"}},\"options\":{\"colorMode\":\"value\",\"graphMode\":\"area\",\"justifyMode\":\"auto\",\"orientation\":\"auto\",\"reduceOptions\":{\"calcs\":[\"lastNotNull\"],\"fields\":\"\",\"values\":false},\"textMode\":\"auto\"},\"targets\":[{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"sum(k6_demo_restaurant_conversation_flows_total_total{job_name=~\\\".*\\\"})\",\"legendFormat\":\"Flows\",\"refId\":\"A\"}]},{\"type\":\"stat\",\"title\":\"Message Success Rate\",\"gridPos\":{\"h\":4,\"w\":6,\"x\":12,\"y\":1},\"id\":4,\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"fieldConfig\":{\"defaults\":{\"color\":{\"mode\":\"thresholds\"},\"thresholds\":{\"mode\":\"absolute\",\"steps\":[{\"color\":\"red\",\"value\":null},{\"color\":\"yellow\",\"value\":0.85},{\"color\":\"green\",\"value\":0.9}]},\"unit\":\"percentunit\",\"decimals\":2}},\"options\":{\"colorMode\":\"value\",\"graphMode\":\"area\",\"justifyMode\":\"auto\",\"orientation\":\"auto\",\"reduceOptions\":{\"calcs\":[\"lastNotNull\"],\"fields\":\"\",\"values\":false},\"textMode\":\"auto\"},\"targets\":[{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"sum(k6_demo_restaurant_agent_messages_success_rate{job_name=~\\\".*\\\"})\",\"legendFormat\":\"Success Rate\",\"refId\":\"A\"}]},{\"type\":\"stat\",\"title\":\"Flow Success Rate\",\"gridPos\":{\"h\":4,\"w\":6,\"x\":18,\"y\":1},\"id\":5,\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"fieldConfig\":{\"defaults\":{\"color\":{\"mode\":\"thresholds\"},\"thresholds\":{\"mode\":\"absolute\",\"steps\":[{\"color\":\"red\",\"value\":null},{\"color\":\"yellow\",\"value\":0.8},{\"color\":\"green\",\"value\":0.85}]},\"unit\":\"percentunit\",\"decimals\":2}},\"options\":{\"colorMode\":\"value\",\"graphMode\":\"area\",\"justifyMode\":\"auto\",\"orientation\":\"auto\",\"reduceOptions\":{\"calcs\":[\"lastNotNull\"],\"fields\":\"\",\"values\":false},\"textMode\":\"auto\"},\"targets\":[{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"sum(k6_demo_restaurant_conversation_flows_success_rate{job_name=~\\\".*\\\"})\",\"legendFormat\":\"Success Rate\",\"refId\":\"A\"}]},{\"type\":\"row\",\"title\":\"\\ud83d\\udcca Event Metrics\",\"gridPos\":{\"h\":1,\"w\":24,\"x\":0,\"y\":5},\"id\":10,\"collapsed\":false},{\"type\":\"timeseries\",\"title\":\"Event Counts by Type\",\"gridPos\":{\"h\":8,\"w\":12,\"x\":0,\"y\":6},\"id\":11,\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"fieldConfig\":{\"defaults\":{\"color\":{\"mode\":\"palette-classic\"},\"custom\":{\"axisCenteredZero\":false,\"axisColorMode\":\"text\",\"axisLabel\":\"\",\"axisPlacement\":\"auto\",\"barAlignment\":0,\"drawStyle\":\"line\",\"fillOpacity\":20,\"gradientMode\":\"none\",\"hideFrom\":{\"legend\":false,\"tooltip\":false,\"viz\":false},\"lineInterpolation\":\"smooth\",\"lineWidth\":2,\"pointSize\":5,\"scaleDistribution\":{\"type\":\"linear\"},\"showPoints\":\"never\",\"spanNulls\":false,\"stacking\":{\"group\":\"A\",\"mode\":\"none\"},\"thresholdsStyle\":{\"mode\":\"off\"}},\"unit\":\"ops\"}},\"options\":{\"legend\":{\"calcs\":[\"mean\",\"sum\"],\"displayMode\":\"table\",\"placement\":\"bottom\",\"showLegend\":true},\"tooltip\":{\"mode\":\"multi\",\"sort\":\"desc\"}},\"targets\":[{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"sum(rate(k6_demo_restaurant_agent_message_total_total{job_name=~\\\".*\\\"}[1m]))\",\"legendFormat\":\"Agent Messages\",\"refId\":\"A\"},{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"sum(rate(k6_demo_restaurant_order_created_total_total{job_name=~\\\".*\\\"}[1m]))\",\"legendFormat\":\"Orders Created\",\"refId\":\"B\"},{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"sum(rate(k6_demo_restaurant_kitchen_dish_ready_total_total{job_name=~\\\".*\\\"}[1m]))\",\"legendFormat\":\"Dishes Ready\",\"refId\":\"C\"},{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"sum(rate(k6_demo_restaurant_sommelier_pairing_total_total{job_name=~\\\".*\\\"}[1m]))\",\"legendFormat\":\"Wine Pairings\",\"refId\":\"D\"},{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"sum(rate(k6_demo_restaurant_service_presentation_total_total{job_name=~\\\".*\\\"}[1m]))\",\"legendFormat\":\"Service Presentations\",\"refId\":\"E\"}]},{\"type\":\"timeseries\",\"title\":\"Message Duration (P95)\",\"gridPos\":{\"h\":8,\"w\":12,\"x\":12,\"y\":6},\"id\":12,\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"fieldConfig\":{\"defaults\":{\"color\":{\"mode\":\"palette-classic\"},\"custom\":{\"axisCenteredZero\":false,\"axisColorMode\":\"text\",\"axisLabel\":\"\",\"axisPlacement\":\"auto\",\"barAlignment\":0,\"drawStyle\":\"line\",\"fillOpacity\":10,\"gradientMode\":\"none\",\"hideFrom\":{\"legend\":false,\"tooltip\":false,\"viz\":false},\"lineInterpolation\":\"smooth\",\"lineWidth\":2,\"pointSize\":5,\"scaleDistribution\":{\"type\":\"linear\"},\"showPoints\":\"never\",\"spanNulls\":false,\"stacking\":{\"group\":\"A\",\"mode\":\"none\"},\"thresholdsStyle\":{\"mode\":\"line+area\"}},\"thresholds\":{\"mode\":\"absolute\",\"steps\":[{\"color\":\"green\",\"value\":null},{\"color\":\"yellow\",\"value\":500},{\"color\":\"red\",\"value\":1000}]},\"unit\":\"ms\"}},\"options\":{\"legend\":{\"calcs\":[\"mean\",\"max\"],\"displayMode\":\"table\",\"placement\":\"bottom\",\"showLegend\":true},\"tooltip\":{\"mode\":\"multi\",\"sort\":\"desc\"}},\"targets\":[{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"histogram_quantile(0.95, rate(k6_demo_restaurant_agent_messages_duration_ms{job_name=~\\\".*\\\"}[1m]))\",\"legendFormat\":\"P95 Duration\",\"refId\":\"A\"}]},{\"type\":\"timeseries\",\"title\":\"Conversation Flow Rate\",\"gridPos\":{\"h\":8,\"w\":12,\"x\":0,\"y\":14},\"id\":13,\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"fieldConfig\":{\"defaults\":{\"color\":{\"mode\":\"palette-classic\"},\"custom\":{\"axisCenteredZero\":false,\"axisColorMode\":\"text\",\"axisLabel\":\"\",\"axisPlacement\":\"auto\",\"barAlignment\":0,\"drawStyle\":\"line\",\"fillOpacity\":20,\"gradientMode\":\"none\",\"hideFrom\":{\"legend\":false,\"tooltip\":false,\"viz\":false},\"lineInterpolation\":\"smooth\",\"lineWidth\":2,\"pointSize\":5,\"scaleDistribution\":{\"type\":\"linear\"},\"showPoints\":\"never\",\"spanNulls\":false,\"stacking\":{\"group\":\"A\",\"mode\":\"none\"},\"thresholdsStyle\":{\"mode\":\"off\"}},\"unit\":\"ops\"}},\"options\":{\"legend\":{\"calcs\":[\"mean\",\"sum\"],\"displayMode\":\"table\",\"placement\":\"bottom\",\"showLegend\":true},\"tooltip\":{\"mode\":\"multi\",\"sort\":\"desc\"}},\"targets\":[{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"sum(rate(k6_demo_restaurant_conversation_flows_total_total{job_name=~\\\".*\\\"}[1m]))\",\"legendFormat\":\"Flow Rate\",\"refId\":\"A\"}]},{\"type\":\"timeseries\",\"title\":\"CloudEvent Publish Metrics\",\"gridPos\":{\"h\":8,\"w\":12,\"x\":12,\"y\":14},\"id\":14,\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"fieldConfig\":{\"defaults\":{\"color\":{\"mode\":\"palette-classic\"},\"custom\":{\"axisCenteredZero\":false,\"axisColorMode\":\"text\",\"axisLabel\":\"\",\"axisPlacement\":\"auto\",\"barAlignment\":0,\"drawStyle\":\"line\",\"fillOpacity\":20,\"gradientMode\":\"none\",\"hideFrom\":{\"legend\":false,\"tooltip\":false,\"viz\":false},\"lineInterpolation\":\"smooth\",\"lineWidth\":2,\"pointSize\":5,\"scaleDistribution\":{\"type\":\"linear\"},\"showPoints\":\"never\",\"spanNulls\":false,\"stacking\":{\"group\":\"A\",\"mode\":\"none\"},\"thresholdsStyle\":{\"mode\":\"off\"}},\"unit\":\"ops\"}},\"options\":{\"legend\":{\"calcs\":[\"mean\",\"sum\"],\"displayMode\":\"table\",\"placement\":\"bottom\",\"showLegend\":true},\"tooltip\":{\"mode\":\"multi\",\"sort\":\"desc\"}},\"targets\":[{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"sum(rate(k6_demo_restaurant_cloudevent_published_total_total{job_name=~\\\".*\\\"}[1m]))\",\"legendFormat\":\"Events Published\",\"refId\":\"A\"},{\"datasource\":{\"type\":\"prometheus\",\"uid\":\"prometheus\"},\"expr\":\"sum(k6_demo_restaurant_cloudevent_publish_success_rate{job_name=~\\\".*\\\"})\",\"legendFormat\":\"Publish Success Rate\",\"refId\":\"B\"}]}],\"time\":{\"from\":\"now-30m\",\"to\":\"now\"},\"timepicker\":{\"refresh_intervals\":[\"5s\",\"10s\",\"30s\",\"1m\",\"5m\",\"15m\",\"30m\",\"1h\"]}}"
