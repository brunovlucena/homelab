{{- if .Values.cloudflare.enabled }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "bruno-site.fullname" . }}-cloudflare
  labels:
    {{- include "bruno-site.labels" . | nindent 4 }}
    app.kubernetes.io/component: cloudflare
type: Opaque
data:
  {{- if .Values.cloudflare.existingSecret }}
  # This secret will be created by Sealed Secrets
  # The actual secret is referenced in the deployment
  {{- else }}
  zone-id: {{ .Values.cloudflare.zoneId | b64enc | quote }}
  api-token: {{ .Values.cloudflare.apiToken | b64enc | quote }}
  domain: {{ .Values.cloudflare.domain | b64enc | quote }}
  enabled: {{ .Values.cloudflare.enabled | toString | b64enc | quote }}
  cache-ttl: {{ .Values.cloudflare.cacheTtl | toString | b64enc | quote }}
  {{- end }}
{{- end }}
